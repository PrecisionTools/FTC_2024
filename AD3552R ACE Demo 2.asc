Version 4
SHEET 1 2352 1396
WIRE 784 -16 752 -16
WIRE 816 -16 784 -16
WIRE 816 48 816 -16
WIRE 1024 96 944 96
WIRE 1616 96 1024 96
WIRE 1840 96 1616 96
WIRE 1616 128 1616 96
WIRE 1024 144 1024 96
WIRE 1024 144 976 144
WIRE 1744 160 1728 160
WIRE 1760 160 1744 160
WIRE 1760 208 1760 160
WIRE -496 224 -816 224
WIRE -400 224 -496 224
WIRE -160 224 -208 224
WIRE 112 224 -160 224
WIRE 416 224 272 224
WIRE 656 224 576 224
WIRE 1136 224 1024 224
WIRE 1616 224 1616 192
WIRE 1616 224 1472 224
WIRE 1728 224 1616 224
WIRE -816 240 -816 224
WIRE 1840 240 1840 96
WIRE 1840 240 1792 240
WIRE 1952 240 1840 240
WIRE 2000 240 1952 240
WIRE 1088 256 1056 256
WIRE 1136 256 1088 256
WIRE 1552 256 1472 256
WIRE 1568 256 1552 256
WIRE 1728 256 1696 256
WIRE -496 288 -544 288
WIRE -400 288 -496 288
WIRE -160 288 -208 288
WIRE -144 288 -160 288
WIRE -112 288 -144 288
WIRE 80 288 32 288
WIRE 112 288 80 288
WIRE 336 288 272 288
WIRE 368 288 336 288
WIRE 1136 288 1104 288
WIRE 1552 288 1472 288
WIRE 1568 288 1552 288
WIRE 1664 288 1632 288
WIRE 1696 288 1696 256
WIRE 1696 288 1664 288
WIRE 1616 304 1616 224
WIRE 1744 320 1728 320
WIRE 1760 320 1760 272
WIRE 1760 320 1744 320
WIRE -544 336 -544 288
WIRE -816 352 -816 320
WIRE 1616 416 1616 384
WIRE 816 432 816 400
WIRE -816 448 -816 432
WIRE 1952 480 1776 480
WIRE 2000 480 1952 480
WIRE -544 496 -544 416
WIRE -144 496 -144 288
WIRE 1104 496 1104 288
WIRE 1104 496 -144 496
WIRE 1776 544 1776 480
WIRE 1776 688 1776 624
WIRE 1200 736 1200 688
WIRE 1312 736 1312 688
WIRE 1424 736 1424 688
WIRE 1552 736 1552 688
WIRE 1200 848 1200 816
WIRE 1312 848 1312 816
WIRE 1424 848 1424 816
WIRE 1552 848 1552 816
FLAG 1200 848 0
FLAG 1312 848 0
FLAG 1424 848 0
FLAG 1200 688 AVDD
FLAG 1312 688 V+
FLAG 1744 160 V+
FLAG 1424 688 V-
FLAG 1744 320 V-
FLAG 1552 848 0
FLAG 1552 688 VREF
FLAG 1664 288 VREF
FLAG 816 432 0
FLAG -160 224 Vdac
FLAG 784 -16 AVDD
FLAG 1952 240 Vout
FLAG -544 496 0
FLAG -496 288 SCLK
FLAG 1088 256 SCLK
FLAG 1552 288 glitch
FLAG 1552 256 trigger
FLAG -496 224 signal
FLAG -160 288 code
FLAG 336 288 error
FLAG 80 288 INL
FLAG -816 448 0
FLAG 1776 688 0
FLAG 1952 480 Vmeas
FLAG 1616 416 0
SYMBOL voltage 1200 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL voltage 1312 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12V
SYMBOL voltage 1424 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -12V
SYMBOL voltage 1552 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 2.5V
SYMBOL OpAmps\\AD8065 1760 176 R0
SYMATTR InstName U1
SYMBOL AD3552R 816 224 R0
SYMATTR InstName U2
SYMATTR SpiceLine OFFSET_POLARITY=-1 OFFSET=496
SYMBOL cap 1600 128 R0
WINDOW 3 26 62 Left 2
SYMATTR Value 4.7pF
SYMATTR InstName C2
SYMBOL digitizer -304 256 R0
WINDOW 39 1 78 Center 2
WINDOW 40 2 137 Center 2
SYMATTR SpiceLine bits = 16
SYMATTR InstName X2
SYMATTR Value2 ""
SYMBOL voltage -544 320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -49 232 Left 2
SYMATTR Value PULSE(0 1 0 100p 100p {1/(2*fs)-200p} {1/fs})
SYMATTR InstName V6
SYMBOL Range 496 224 R0
SYMATTR InstName X3
SYMATTR Value2 Vlow = 0
SYMATTR SpiceLine Vhigh = 2.5
SYMBOL Add_INL 192 256 R0
WINDOW 0 -3 -56 Bottom 2
WINDOW 3 1 74 Center 2
WINDOW 123 5 98 Center 2
SYMATTR InstName X4
SYMBOL INL -48 288 R0
WINDOW 3 21 66 Bottom 2
SYMATTR InstName U3
SYMBOL AD3552R_current_glitch 1296 256 R0
SYMATTR InstName X1
SYMATTR Value2 offset = 8
SYMBOL voltage -816 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0 0.5 10k)
SYMBOL voltage -816 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value SINE(0 0.5 15k)
SYMBOL voltage 1776 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PWL file=ADC_capture_as_PWL.txt
SYMBOL bi 1616 384 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -305 -7 Left 2
SYMATTR InstName B1
SYMATTR Value I=500n*white(fs*time)
TEXT 912 -280 Left 2 ;OFFSET_POLARITY: 1 or -1\nOFFSET: 0 TO 255\nGAIN_SCALING:\n    0: x 1\n    1: x 0.5\n    2: x 0.25\n    3: x 0.125
TEXT -216 776 Left 2 ;Simulation parameters
TEXT 336 720 Left 2 ;Transient simulation
TEXT -448 -280 Left 2 ;Range              RFB            GAIN_SCALING_P           GAIN_SCALING_N          OFFSET_POLARITY                  OFFSET\n0 to 2.5V            1x                       0                                              3                                         -1                                 48\n0 to 5V               1x                       0                                              0                                         X                                      0\n0 to 10V             2x                       0                                              0                                          1                                 496\n-5 to 5V              2x                       0                                              0                                         -1                                 496\n-10 to 10V          4x                       0                                              0                                         -1                                 247
TEXT -184 816 Left 2 !.param fs 25e6
TEXT -104 456 Left 2 !.include AD3552R_INL.cir
TEXT 384 744 Left 2 !.tran 5m
TEXT 352 856 Left 2 ;.ac dec 30 1 100Meg
TEXT 304 824 Left 2 ;Frequency response simulation
TEXT -784 88 Left 2 !.wave "out.wav" 16 {fs} V(Vdac)
