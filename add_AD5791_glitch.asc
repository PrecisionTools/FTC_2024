Version 4
SHEET 1 3124 708
WIRE 2304 -448 2176 -448
WIRE -288 -384 -432 -384
WIRE -48 -384 -128 -384
WIRE 16 -384 -48 -384
WIRE 272 -384 160 -384
WIRE 640 -384 272 -384
WIRE 2176 -384 2176 -448
WIRE 832 -368 704 -368
WIRE 1008 -368 832 -368
WIRE 1152 -368 1008 -368
WIRE 1328 -368 1248 -368
WIRE 1408 -368 1328 -368
WIRE 2128 -368 1936 -368
WIRE 160 -336 160 -384
WIRE 640 -336 592 -336
WIRE 1008 -320 1008 -368
WIRE 1040 -320 1008 -320
WIRE 1152 -320 1088 -320
WIRE 1408 -288 1408 -368
WIRE 1440 -288 1408 -288
WIRE 1936 -288 1936 -368
WIRE 2128 -288 2128 -320
WIRE 2176 -288 2176 -304
WIRE 2176 -288 2128 -288
WIRE 1568 -272 1504 -272
WIRE -208 -256 -208 -304
WIRE -208 -256 -432 -256
WIRE 1152 -256 1152 -288
WIRE 2176 -256 2176 -288
WIRE 1440 -224 1408 -224
WIRE 160 -208 160 -256
WIRE 1456 -192 1456 -224
WIRE 1936 -144 1936 -208
WIRE 272 -128 160 -128
WIRE 640 -128 272 -128
WIRE 848 -128 704 -128
WIRE 1008 -128 848 -128
WIRE 1152 -128 1008 -128
WIRE 1328 -128 1248 -128
WIRE 1408 -128 1408 -224
WIRE 1408 -128 1328 -128
WIRE 592 -96 592 -336
WIRE 640 -96 592 -96
WIRE 1008 -80 1008 -128
WIRE 1040 -80 1008 -80
WIRE 1152 -80 1088 -80
WIRE 160 -48 160 -128
WIRE 1152 -16 1152 -48
WIRE 1936 -16 1936 -64
WIRE 2592 48 2352 48
WIRE 160 80 160 32
WIRE 2352 112 2352 48
WIRE 2112 128 2032 128
WIRE 2176 128 2112 128
WIRE 272 160 160 160
WIRE 592 160 592 -96
WIRE 592 160 272 160
WIRE 2352 240 2352 192
WIRE 160 272 160 160
WIRE 160 400 160 352
FLAG -432 -384 code
IOPIN -432 -384 In
FLAG -432 -256 SCLK
IOPIN -432 -256 In
FLAG 272 -384 pos_chg
FLAG -48 -384 last_code
FLAG 160 -208 0
FLAG 272 -128 neg_chg
FLAG 160 80 0
FLAG 160 400 0
FLAG 272 160 code_match
FLAG 832 -368 pos_glitch_trig
FLAG 848 -128 neg_glitch_trig
FLAG 1936 -16 0
FLAG 1152 -256 0
FLAG 1328 -368 pos_enable
FLAG 1152 -16 0
FLAG 1328 -128 neg_enable
FLAG 2032 128 signal_in
IOPIN 2032 128 In
FLAG 1568 -272 trigger
IOPIN 1568 -272 Out
FLAG 1456 -192 0
FLAG 2592 48 signal_out
IOPIN 2592 48 Out
FLAG 2304 -448 glitch
IOPIN 2304 -448 Out
FLAG 2176 -256 0
FLAG 2352 240 0
FLAG 2112 128 signal_in
SYMBOL tap_register -208 -352 R0
SYMATTR InstName X1
SYMBOL bv 160 -352 R0
SYMATTR InstName B1
SYMATTR Value V=if(V(code,last_code)>0.5,1,0)
SYMBOL bv 160 -64 R0
SYMATTR InstName B2
SYMATTR Value V=if(V(code,last_code)<-0.5,1,0)
SYMBOL bv 160 256 R0
SYMATTR InstName B3
SYMATTR Value V=if(V(code)-offset-int((V(code)-offset)/period)*period<0.5,1,0)
SYMBOL Digital\\and 672 -416 R0
SYMATTR InstName A1
SYMBOL Digital\\and 672 -176 R0
SYMATTR InstName A2
SYMBOL voltage 1936 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL file="AD5791 Increasing Code Glitch.csv" TRIGGER V(pos_enable) > 0.5
SYMBOL Digital\\srflop 1200 -416 R0
SYMATTR InstName A3
SYMBOL Digital\\srflop 1200 -176 R0
SYMATTR InstName A4
SYMBOL voltage 1936 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PWL file="AD5791 Decreasing Code Glitch.csv" TRIGGER V(neg_enable) > 0.5
SYMBOL Digital\\or 1472 -320 R0
SYMATTR InstName A5
SYMBOL e 2176 -400 R0
SYMATTR InstName E2
SYMATTR Value {amplitude}
SYMBOL bv 2352 96 R0
SYMATTR InstName B4
SYMATTR Value V=V(signal_in)+V(glitch)
SYMBOL bDelay 1072 -320 R0
SYMATTR SpiceLine2 t=duration
SYMATTR InstName X2
SYMBOL bDelay 1072 -80 R0
SYMATTR SpiceLine2 t=duration
SYMATTR InstName X3
TEXT -16 -568 Left 2 !.param offset = 0\n.param period = 8\n.param amplitude = 1
TEXT 968 -520 Left 2 !.param duration = 5u
